import heapq

# Grafo ampliado: Custo = Dist√¢ncia aproximada em KM
MAPA_MT_EXTENDIDO = {
    'Sinop': {'Sorriso': 85, 'Cl√°udia': 90, 'Santa Carmem': 40, 'Novo Progresso': 500, 'Alta Floresta': 315},
    'Sorriso': {'Sinop': 85, 'Lucas do Rio Verde': 70, 'Vera': 60, 'Ipiranga do Norte': 80},
    'Santa Carmem': {'Sinop': 40, 'Vera': 100},
    'Vera': {'Sorriso': 60, 'Santa Carmem': 100},
    'Cl√°udia': {'Sinop': 90, 'Uni√£o do Sul': 80},
    'Lucas do Rio Verde': {'Sorriso': 70, 'Nova Mutum': 100, 'Tapurah': 90},
    'Nova Mutum': {'Lucas do Rio Verde': 100, 'Cuiab√°': 250, 'Diamantino': 80},
    'Cuiab√°': {'Nova Mutum': 250, 'Rondon√≥polis': 215, 'C√°ceres': 215, 'Primavera do Leste': 240},
    'Rondon√≥polis': {'Cuiab√°': 215, 'Primavera do Leste': 130, 'Barra do Gar√ßas': 390},
    'Primavera do Leste': {'Cuiab√°': 240, 'Rondon√≥polis': 130, 'Barra do Gar√ßas': 260},
    'C√°ceres': {'Cuiab√°': 215, 'Pontes e Lacerda': 220, 'Tangar√° da Serra': 240},
    'Tangar√° da Serra': {'C√°ceres': 240, 'Diamantino': 150, 'Campo Novo do Parecis': 150},
    'Barra do Gar√ßas': {'Primavera do Leste': 260, 'Rondon√≥polis': 390, '√Ågua Boa': 240},
    'Alta Floresta': {'Sinop': 315, 'Col√≠der': 160},
    'Col√≠der': {'Alta Floresta': 160, 'Sinop': 150},
    'Novo Progresso': {'Sinop': 500}, # J√° no Par√°, mas conectado via BR-163
}

def ucs_mato_grosso(inicio, objetivo):
    # Fila de prioridade: (custo_acumulado, cidade_atual, caminho)
    fronteira = [(0, inicio, [inicio])]
    explorados = {} # Armazena o menor custo para chegar em cada cidade

    print(f"--- Iniciando Expedi√ß√£o UCS: {inicio} para {objetivo} ---")

    while fronteira:
        # Pega a cidade com o menor custo acumulado g(n)
        custo_acumulado, cidade_atual, caminho = heapq.heappop(fronteira)

        # Teste de objetivo
        if cidade_atual == objetivo:
            return caminho, custo_acumulado

        # Se j√° achamos um caminho mais curto para essa cidade, ignora este
        if cidade_atual in explorados and explorados[cidade_atual] <= custo_acumulado:
            continue
        
        explorados[cidade_atual] = custo_acumulado

        # Expandir vizinhos
        vizinhos = MAPA_MT_EXTENDIDO.get(cidade_atual, {})
        for vizinho, distancia in vizinhos.items():
            novo_custo = custo_acumulado + distancia
            if vizinho not in explorados or novo_custo < explorados[vizinho]:
                heapq.heappush(fronteira, (novo_custo, vizinho, caminho + [vizinho]))

    return None, float('inf')

# --- Simula√ß√£o de Viagem Longa ---
partida = 'Alta Floresta'
destino = 'Barra do Gar√ßas'

rota, km_total = ucs_mato_grosso(partida, destino)

if rota:
    print(f"\n‚úÖ ROTA √ìTIMA ENCONTRADA:")
    print(f"üìç Itiner√°rio: {' ‚ûî '.join(rota)}")
    print(f"üõ£Ô∏è Dist√¢ncia Total: {km_total} km")
else:
    print("\n‚ùå N√£o foi poss√≠vel tra√ßar uma rota entre esses pontos.")
